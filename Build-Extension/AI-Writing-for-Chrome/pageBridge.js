window.__AI_WRITING_BRIDGE_READY__?console.warn("[AIWriting:bridge] Already initialized."):(window.__AI_WRITING_BRIDGE_READY__=!0,console.log("[AIWriting:bridge] Bridge script injected into page."),window.addEventListener("message",(e=>{e.source===window&&"AI_WRITING_TRANSLATE_REQUEST"===e.data?.type&&(console.log("[AIWriting:bridge] Received translate request:",e.data),window.postMessage({type:"AI_WRITING_TRANSLATE_RELAY_TO_CONTENT",text:e.data.text,translateMode:e.data.translateMode,__requestId:Date.now()+"_"+Math.random().toString(36).slice(2)},"*"))})),window.addEventListener("message",(e=>{if(e.source!==window||"AI_WRITING_TRANSLATE_RELAY_FROM_CONTENT"!==e.data?.type)return;const t=e.data.original||{};window.postMessage({type:"AI_WRITING_TRANSLATE_RESPONSE",result:e.data.result,error:e.data.error,original:t},"*")})));